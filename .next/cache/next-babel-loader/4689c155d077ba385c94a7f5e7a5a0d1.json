{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport axios from 'axios';\nimport { Cookies } from 'react-cookie';\nimport { handleAuthSSR } from '../utils/auth';\nconst serverUrl = 'http://localhost:3001'; // set up cookies\n\nconst cookies = new Cookies();\n\nclass Secret extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"onPingCall\", async e => {\n      const token = cookies.get('token');\n\n      try {\n        const res = await axios.get(serverUrl + '/api/ping', {\n          headers: {\n            'Authorization': token\n          }\n        });\n        console.log(res.data.msg);\n      } catch (err) {\n        console.log(err.response.data.msg);\n      }\n    });\n  }\n\n  render() {\n    return __jsx(\"div\", null, __jsx(\"h2\", null, \"Secret page\"), __jsx(\"p\", null, \"Only accessible via a valid JWT\"), __jsx(\"br\", null), __jsx(\"button\", {\n      onClick: e => this.onPingCall(e)\n    }, \"Ping Call\"), __jsx(\"p\", null, \"Check console for response\"));\n  }\n\n} // Server-Side Rendering\n\n\nSecret.getInitialProps = async ctx => {\n  // Must validate JWT\n  // If the JWT is invalid it must redirect\n  // back to the main page. You can do that\n  // with Router from 'next/router\n  await handleAuthSSR(ctx); // Must return an object\n\n  return {};\n};\n\nexport default Secret;","map":{"version":3,"sources":["C:/Users/Roglol/Desktop/dekori/pages/secret.js"],"names":["React","axios","Cookies","handleAuthSSR","serverUrl","cookies","Secret","Component","e","token","get","res","headers","console","log","data","msg","err","response","render","onPingCall","getInitialProps","ctx"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,cAAxB;AACA,SAASC,aAAT,QAA8B,eAA9B;AAEA,MAAMC,SAAS,GAAG,uBAAlB,C,CAEA;;AACA,MAAMC,OAAO,GAAG,IAAIH,OAAJ,EAAhB;;AAEA,MAAMI,MAAN,SAAqBN,KAAK,CAACO,SAA3B,CAAqC;AAAA;AAAA;;AAAA,wCAEtB,MAAOC,CAAP,IAAa;AACxB,YAAMC,KAAK,GAAGJ,OAAO,CAACK,GAAR,CAAY,OAAZ,CAAd;;AAEA,UAAI;AACF,cAAMC,GAAG,GAAG,MAAMV,KAAK,CAACS,GAAN,CAAUN,SAAS,GAAG,WAAtB,EAAmC;AAAEQ,UAAAA,OAAO,EAAE;AAAE,6BAAiBH;AAAnB;AAAX,SAAnC,CAAlB;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAJ,CAASC,GAArB;AACD,OAHD,CAGE,OAAOC,GAAP,EAAY;AACZJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,GAAG,CAACC,QAAJ,CAAaH,IAAb,CAAkBC,GAA9B;AACD;AACF,KAXkC;AAAA;;AAanCG,EAAAA,MAAM,GAAG;AACP,WACE,mBACE,gCADF,EAEE,mDAFF,EAGE,iBAHF,EAIE;AAAQ,MAAA,OAAO,EAAGX,CAAD,IAAO,KAAKY,UAAL,CAAgBZ,CAAhB;AAAxB,mBAJF,EAKE,8CALF,CADF;AASD;;AAvBkC,C,CA0BrC;;;AACAF,MAAM,CAACe,eAAP,GAAyB,MAAOC,GAAP,IAAe;AACtC;AACA;AACA;AACA;AACA,QAAMnB,aAAa,CAACmB,GAAD,CAAnB,CALsC,CAOtC;;AACA,SAAO,EAAP;AACD,CATD;;AAWA,eAAehB,MAAf","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport { Cookies } from 'react-cookie';\r\nimport { handleAuthSSR } from '../utils/auth';\r\n\r\nconst serverUrl = 'http://localhost:3001';\r\n\r\n// set up cookies\r\nconst cookies = new Cookies();\r\n\r\nclass Secret extends React.Component {\r\n\r\n  onPingCall = async (e) => {\r\n    const token = cookies.get('token')\r\n\r\n    try {\r\n      const res = await axios.get(serverUrl + '/api/ping', { headers: { 'Authorization': token } });\r\n      console.log(res.data.msg);\r\n    } catch (err) {\r\n      console.log(err.response.data.msg);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2>Secret page</h2>\r\n        <p>Only accessible via a valid JWT</p>\r\n        <br></br>\r\n        <button onClick={(e) => this.onPingCall(e)}>Ping Call</button>\r\n        <p>Check console for response</p>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// Server-Side Rendering\r\nSecret.getInitialProps = async (ctx) => {\r\n  // Must validate JWT\r\n  // If the JWT is invalid it must redirect\r\n  // back to the main page. You can do that\r\n  // with Router from 'next/router\r\n  await handleAuthSSR(ctx);\r\n\r\n  // Must return an object\r\n  return {}\r\n}\r\n\r\nexport default Secret;"]},"metadata":{},"sourceType":"module"}